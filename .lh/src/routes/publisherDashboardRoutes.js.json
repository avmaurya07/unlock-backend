{
    "sourceFile": "src/routes/publisherDashboardRoutes.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1766931105436,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766944878525,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n const express = require(\"express\");\n const router = express.Router();\n \n-const auth = require(\"../middlewares/authMiddleware\");\n-const role = require(\"../middlewares/roleMiddleware\");\n+const auth = require(\"../middleware/authMiddleware\");\n+const role = require(\"../middleware/roleMiddleware\");\n \n const {\n   getDashboardSummary,\n   getRecentListings,\n"
                },
                {
                    "date": 1766946052828,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n const express = require(\"express\");\n const router = express.Router();\n \n-const auth = require(\"../middleware/authMiddleware\");\n+const {auth} = require(\"../middleware/authMiddleware\");\n const role = require(\"../middleware/roleMiddleware\");\n \n const {\n   getDashboardSummary,\n"
                },
                {
                    "date": 1766946059429,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,17 @@\n const express = require(\"express\");\n const router = express.Router();\n \n-const {auth} = require(\"../middleware/authMiddleware\");\n+const {protect} = require(\"../middleware/authMiddleware\");\n const role = require(\"../middleware/roleMiddleware\");\n \n const {\n   getDashboardSummary,\n   getRecentListings,\n   getSubscriptionInfo\n } = require(\"../controllers/publisherDashboardController\");\n \n-router.get(\"/summary\", auth, role(\"publisher\"), getDashboardSummary);\n-router.get(\"/recent\", auth, role(\"publisher\"), getRecentListings);\n-router.get(\"/subscription\", auth, role(\"publisher\"), getSubscriptionInfo);\n+router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n+router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n+router.get(\"/subscription\", protect, role(\"publisher\"), getSubscriptionInfo);\n \n module.exports = router;\n"
                },
                {
                    "date": 1767934000070,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n \n const {protect} = require(\"../middleware/authMiddleware\");\n const role = require(\"../middleware/roleMiddleware\");\n \n+\n const {\n   getDashboardSummary,\n   getRecentListings,\n   getSubscriptionInfo\n"
                },
                {
                    "date": 1767934297111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,14 +2,16 @@\n const router = express.Router();\n \n const {protect} = require(\"../middleware/authMiddleware\");\n const role = require(\"../middleware/roleMiddleware\");\n+const subscriptionCheck = require(\"../middleware/subscriptionCheck\");\n \n-\n const {\n   getDashboardSummary,\n   getRecentListings,\n-  getSubscriptionInfo\n+  getSubscriptionInfo,\n+  getMyEvents,\n+  createEvent,\n } = require(\"../controllers/publisherDashboardController\");\n \n router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n"
                },
                {
                    "date": 1767934308836,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,5 +16,11 @@\n router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n router.get(\"/subscription\", protect, role(\"publisher\"), getSubscriptionInfo);\n \n+// ✅ LIST MY EVENTS (filters + pagination)\n+router.get(\"/events\", protect, role(\"publisher\"), getMyEvents);\n+\n+// ✅ CREATE EVENT (requires active subscription)\n+router.post(\"/events\", protect, role(\"publisher\"), subscriptionCheck, createEvent);\n+\n module.exports = router;\n"
                },
                {
                    "date": 1767935262531,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,10 +8,10 @@\n const {\n   getDashboardSummary,\n   getRecentListings,\n   getSubscriptionInfo,\n-  getMyEvents,\n-  createEvent,\n+getPublisherEvents,\n+  createPublisherEvent,\n } = require(\"../controllers/publisherDashboardController\");\n \n router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n"
                },
                {
                    "date": 1767935273932,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,11 +16,9 @@\n router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n router.get(\"/subscription\", protect, role(\"publisher\"), getSubscriptionInfo);\n \n-// ✅ LIST MY EVENTS (filters + pagination)\n-router.get(\"/events\", protect, role(\"publisher\"), getMyEvents);\n+// ✅ Correct: since app.use(\"/api/publisher/dashboard\", router)\n+router.get(\"/events\", protect, role(\"publisher\"), getPublisherEvents);\n+router.post(\"/events\", protect, role(\"publisher\"), createPublisherEvent);\n \n-// ✅ CREATE EVENT (requires active subscription)\n-router.post(\"/events\", protect, role(\"publisher\"), subscriptionCheck, createEvent);\n-\n module.exports = router;\n"
                },
                {
                    "date": 1767935409470,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n   getDashboardSummary,\n   getRecentListings,\n   getSubscriptionInfo,\n getPublisherEvents,\n-  createPublisherEvent,\n+  createPublisherEvent\n } = require(\"../controllers/publisherDashboardController\");\n \n router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n"
                },
                {
                    "date": 1767935420370,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,27 @@\n+const express = require(\"express\");\n+const router = express.Router();\n+\n+const {protect} = require(\"../middleware/authMiddleware\");\n+const role = require(\"../middleware/roleMiddleware\");\n+const subscriptionCheck = require(\"../middleware/subscriptionCheck\");\n+\n+const {\n+  getDashboardSummary,\n+  getRecentListings,\n+  getSubscriptionInfo,\n+getPublisherEvents,\n+  createPublisherEvent\n+} = require(\"../controllers/publisherDashboardController\");\n+\n+const allowAll = (req, res, next) => next();\n+\n+\n+router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n+router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n+router.get(\"/subscription\", protect, role(\"publisher\"), getSubscriptionInfo);\n+\n+// ✅ Correct: since app.use(\"/api/publisher/dashboard\", router)\n+router.get(\"/events\", protect, role(\"publisher\"), getPublisherEvents);\n+router.post(\"/events\", protect, role(\"publisher\"), createPublisherEvent);\n+\n+module.exports = router;\n"
                },
                {
                    "date": 1767935433387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,33 +14,11 @@\n } = require(\"../controllers/publisherDashboardController\");\n \n const allowAll = (req, res, next) => next();\n \n+const allowAll = (req, res, next) => next();\n \n-router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n-router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n-router.get(\"/subscription\", protect, role(\"publisher\"), getSubscriptionInfo);\n \n-// ✅ Correct: since app.use(\"/api/publisher/dashboard\", router)\n-router.get(\"/events\", protect, role(\"publisher\"), getPublisherEvents);\n-router.post(\"/events\", protect, role(\"publisher\"), createPublisherEvent);\n-\n-module.exports = router;\n-const express = require(\"express\");\n-const router = express.Router();\n-\n-const {protect} = require(\"../middleware/authMiddleware\");\n-const role = require(\"../middleware/roleMiddleware\");\n-const subscriptionCheck = require(\"../middleware/subscriptionCheck\");\n-\n-const {\n-  getDashboardSummary,\n-  getRecentListings,\n-  getSubscriptionInfo,\n-getPublisherEvents,\n-  createPublisherEvent\n-} = require(\"../controllers/publisherDashboardController\");\n-\n router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n router.get(\"/subscription\", protect, role(\"publisher\"), getSubscriptionInfo);\n \n"
                },
                {
                    "date": 1767935439916,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,29 @@\n+const express = require(\"express\");\n+const router = express.Router();\n+\n+const {protect} = require(\"../middleware/authMiddleware\");\n+const role = require(\"../middleware/roleMiddleware\");\n+const subscriptionCheck = require(\"../middleware/subscriptionCheck\");\n+\n+const {\n+  getDashboardSummary,\n+  getRecentListings,\n+  getSubscriptionInfo,\n+getPublisherEvents,\n+  createPublisherEvent\n+} = require(\"../controllers/publisherDashboardController\");\n+\n+const allowAll = (req, res, next) => next();\n+\n+const AUTH = process.env.DISABLE_AUTH === \"true\" ? allowAll : protect;\n+const PUB = process.env.DISABLE_AUTH === \"true\" ? allowAll : role(\"publisher\");\n+\n+router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n+router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n+router.get(\"/subscription\", protect, role(\"publisher\"), getSubscriptionInfo);\n+\n+// ✅ Correct: since app.use(\"/api/publisher/dashboard\", router)\n+router.get(\"/events\", protect, role(\"publisher\"), getPublisherEvents);\n+router.post(\"/events\", protect, role(\"publisher\"), createPublisherEvent);\n+\n+module.exports = router;\n"
                },
                {
                    "date": 1767935607799,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,16 @@\n const express = require(\"express\");\n const router = express.Router();\n \n-const {protect} = require(\"../middleware/authMiddleware\");\n+const { protect } = require(\"../middleware/authMiddleware\");\n const role = require(\"../middleware/roleMiddleware\");\n const subscriptionCheck = require(\"../middleware/subscriptionCheck\");\n \n const {\n   getDashboardSummary,\n   getRecentListings,\n   getSubscriptionInfo,\n-getPublisherEvents,\n+  getPublisherEvents,\n   createPublisherEvent\n } = require(\"../controllers/publisherDashboardController\");\n \n const allowAll = (req, res, next) => next();\n@@ -26,33 +26,4 @@\n router.get(\"/events\", protect, role(\"publisher\"), getPublisherEvents);\n router.post(\"/events\", protect, role(\"publisher\"), createPublisherEvent);\n \n module.exports = router;\n-const express = require(\"express\");\n-const router = express.Router();\n-\n-const {protect} = require(\"../middleware/authMiddleware\");\n-const role = require(\"../middleware/roleMiddleware\");\n-const subscriptionCheck = require(\"../middleware/subscriptionCheck\");\n-\n-const {\n-  getDashboardSummary,\n-  getRecentListings,\n-  getSubscriptionInfo,\n-getPublisherEvents,\n-  createPublisherEvent\n-} = require(\"../controllers/publisherDashboardController\");\n-\n-const allowAll = (req, res, next) => next();\n-\n-const allowAll = (req, res, next) => next();\n-\n-\n-router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n-router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n-router.get(\"/subscription\", protect, role(\"publisher\"), getSubscriptionInfo);\n-\n-// ✅ Correct: since app.use(\"/api/publisher/dashboard\", router)\n-router.get(\"/events\", protect, role(\"publisher\"), getPublisherEvents);\n-router.post(\"/events\", protect, role(\"publisher\"), createPublisherEvent);\n-\n-module.exports = router;\n"
                },
                {
                    "date": 1767936027265,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,28 +2,26 @@\n const router = express.Router();\n \n const { protect } = require(\"../middleware/authMiddleware\");\n const role = require(\"../middleware/roleMiddleware\");\n-const subscriptionCheck = require(\"../middleware/subscriptionCheck\");\n \n const {\n   getDashboardSummary,\n   getRecentListings,\n   getSubscriptionInfo,\n   getPublisherEvents,\n-  createPublisherEvent\n+  createPublisherEvent,\n } = require(\"../controllers/publisherDashboardController\");\n \n const allowAll = (req, res, next) => next();\n \n const AUTH = process.env.DISABLE_AUTH === \"true\" ? allowAll : protect;\n-const PUB = process.env.DISABLE_AUTH === \"true\" ? allowAll : role(\"publisher\");\n+const PUB  = process.env.DISABLE_AUTH === \"true\" ? allowAll : role(\"publisher\");\n \n-router.get(\"/summary\", protect, role(\"publisher\"), getDashboardSummary);\n-router.get(\"/recent\", protect, role(\"publisher\"), getRecentListings);\n-router.get(\"/subscription\", protect, role(\"publisher\"), getSubscriptionInfo);\n+router.get(\"/summary\", AUTH, PUB, getDashboardSummary);\n+router.get(\"/recent\", AUTH, PUB, getRecentListings);\n+router.get(\"/subscription\", AUTH, PUB, getSubscriptionInfo);\n \n-// ✅ Correct: since app.use(\"/api/publisher/dashboard\", router)\n-router.get(\"/events\", protect, role(\"publisher\"), getPublisherEvents);\n-router.post(\"/events\", protect, role(\"publisher\"), createPublisherEvent);\n+router.get(\"/events\", AUTH, PUB, getPublisherEvents);\n+router.post(\"/events\", AUTH, PUB, createPublisherEvent);\n \n module.exports = router;\n"
                },
                {
                    "date": 1767938627043,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,11 +4,8 @@\n const { protect } = require(\"../middleware/authMiddleware\");\n const role = require(\"../middleware/roleMiddleware\");\n \n const {\n-  getDashboardSummary,\n-  getRecentListings,\n-  getSubscriptionInfo,\n   getPublisherEvents,\n   createPublisherEvent,\n } = require(\"../controllers/publisherDashboardController\");\n \n@@ -16,12 +13,9 @@\n \n const AUTH = process.env.DISABLE_AUTH === \"true\" ? allowAll : protect;\n const PUB  = process.env.DISABLE_AUTH === \"true\" ? allowAll : role(\"publisher\");\n \n-router.get(\"/summary\", AUTH, PUB, getDashboardSummary);\n-router.get(\"/recent\", AUTH, PUB, getRecentListings);\n-router.get(\"/subscription\", AUTH, PUB, getSubscriptionInfo);\n-\n+// ✅ Events\n router.get(\"/events\", AUTH, PUB, getPublisherEvents);\n router.post(\"/events\", AUTH, PUB, createPublisherEvent);\n \n module.exports = router;\n"
                }
            ],
            "date": 1766931105436,
            "name": "Commit-0",
            "content": "const express = require(\"express\");\nconst router = express.Router();\n\nconst auth = require(\"../middlewares/authMiddleware\");\nconst role = require(\"../middlewares/roleMiddleware\");\n\nconst {\n  getDashboardSummary,\n  getRecentListings,\n  getSubscriptionInfo\n} = require(\"../controllers/publisherDashboardController\");\n\nrouter.get(\"/summary\", auth, role(\"publisher\"), getDashboardSummary);\nrouter.get(\"/recent\", auth, role(\"publisher\"), getRecentListings);\nrouter.get(\"/subscription\", auth, role(\"publisher\"), getSubscriptionInfo);\n\nmodule.exports = router;\n"
        }
    ]
}